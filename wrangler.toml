name = "splitogram"
main = "backend/src/index.ts"
compatibility_date = "2024-09-01"
compatibility_flags = ["nodejs_compat"]

[observability.logs]
enabled = true
head_sampling_rate = 0.1

# KV Namespaces — create in CF dashboard and replace ID
[[kv_namespaces]]
binding = "SESSIONS"
id = "REPLACE_WITH_KV_NAMESPACE_ID"

# D1 Database — create in CF dashboard and replace ID
[[d1_databases]]
binding = "DB"
database_name = "splitogram-db"
database_id = "REPLACE_WITH_D1_DATABASE_ID"
migrations_dir = "backend/drizzle/migrations"

# Non-secret environment variables
[vars]
ENVIRONMENT = "production"
# PAGES_URL = "https://splitogram.pages.dev"
# USDT_MASTER_ADDRESS = "kQBqSpvo4S87mX9tjHaG4zhYZeORhVhMapBJpnMZ64jV_JBr"  # testnet USDT

pages_build_output_dir = "frontend/dist"
